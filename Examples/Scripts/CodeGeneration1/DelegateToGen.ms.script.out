VOID TestWithDump DelegateToGen
 : .?
  ^ IN aWord
  TtfwWord VAR l_Word
  aWord
  |N
  g_Gen
  .FindMemberRecur
  l_Word
  pop:Word:SetValue
  if
   (
    l_Word
    IsNil
   )
  then
   (
    aWord
    DO
   )
  else
   (
    l_Word
    DO
   )
 ; // : .?
 
 TtfwWord FUNCTION .FindMemberRecur
  TtfwWord IN aGen
  STRING IN aName
  TtfwKeyWord VAR l_Member
  aName
  aGen
  pop:Word:FindMember
  l_Member
  pop:Word:SetValue
  if
   (
    l_Member
    IsNil
   )
  then
   (
    nil
    Result
    pop:Word:SetValue
   )
  else
   (
    l_Member
    pop:KeyWord:Word
    Result
    pop:Word:SetValue
   )
  if
   (
    Result
    IsNil
   )
  then
   (
    aGen
    .Inherited.Words
    (
     IN anItem
     TtfwWord VAR l_Found
     BOOLEAN VAR l_WasNil
     Result
     IsNil
     l_WasNil
     pop:Word:SetValue
     aName
     anItem
     (
      .FindMemberRecur
      DO
     )
     l_Found
     pop:Word:SetValue
     (
      l_WasNil
      OR
      (
       (
        l_Found
        IsNil
       )
      )
     )
     ?ASSURE
     ARRAY [
      'Множественное наследование не поддерживается. Слово: '
      aName
      ' генератор '
      aGen
      pop:Word:Name
     ]
     l_Found
     Result
     pop:Word:SetValue
    )
    SWAP
    Array:Iterate
   )
 ; // TtfwWord FUNCTION .FindMemberRecur
 
 : A
  1
  +
 ; // : A
 
 : B
  2
  +
 ; // : B
 
 : C
  3
  +
 ; // : C
 
 : D
  4
  +
 ; // : D
 
 TtfwWord VAR g_Gen
 : Gen1
  : A
   10
   +
  ; // : A
  
 ; // : Gen1
 
 : Gen2
  Inherits %G
   Gen1
  ; // Inherits %G
  
  : B
   20
   +
  ; // : B
  
 ; // : Gen2
 
 : Gen3
  : C
   30
   +
  ; // : C
  
 ; // : Gen3
 
 : Gen4
  : D
   40
   +
  ; // : D
  
 ; // : Gen4
 
 DelegateToGen
 DumpElement
 @
 Gen1
 g_Gen
 pop:Word:SetValue
 1
 .?
 A
 .
 1
 .?
 B
 .
 1
 .?
 C
 .
 1
 .?
 D
 .
 '----'
 .
 @
 Gen2
 g_Gen
 pop:Word:SetValue
 1
 .?
 A
 .
 1
 .?
 B
 .
 1
 .?
 C
 .
 1
 .?
 D
 .
 '----'
 .
 @
 Gen3
 g_Gen
 pop:Word:SetValue
 1
 .?
 A
 .
 1
 .?
 B
 .
 1
 .?
 C
 .
 1
 .?
 D
 .
 '----'
 .
 @
 Gen4
 g_Gen
 pop:Word:SetValue
 1
 .?
 A
 .
 1
 .?
 B
 .
 1
 .?
 C
 .
 1
 .?
 D
 .
 '----'
 .
; // VOID TestWithDump DelegateToGen

11
3
4
5
----
11
21
4
5
----
2
3
31
5
----
2
3
4
41
----
