l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttInteger
l3_ttSymbol
l3_ttString
123
12
6
5
4
3
2
1
VOID Test DogAndBracketTest
 IMMEDIATE VOID MACRO @(
  NameOf
  (
  NameOf
  )
  DogAndBracket
 ; // IMMEDIATE VOID MACRO @(
 
 IMMEDIATE VOID MACRO @[
  NameOf
  [
  NameOf
  ]
  DogAndBracket
 ; // IMMEDIATE VOID MACRO @[
 
 VOID PROCEDURE DogAndBracket
  STRING IN aBracketClose
  STRING IN aBracketOpen
  ARRAY VAR l_A
  INTERFACE VAR l_Parser
  Ctx:Parser
  >>>
  l_Parser
  l_A :=
  [
  ]
  l_Parser
  pop:Parser:NextToken
  WHILE
  true
  BEGIN
   STRING VAR l_Token
   INTEGER VAR l_TokenType
   l_Parser
   pop:Parser:TokenLongString
   >>>
   l_Token
   l_Parser
   pop:Parser:TokenType
   >>>
   l_TokenType
   if
    (
     l_TokenType
     =
     Tl3TokenType::l3_ttSymbol
    )
   then
    BEGIN
     (
      l_Token
      =
      NameOf
      (
     )
     ?FAIL
     'Вложенные скобки пока не поддерживаются'
     (
      l_Token
      =
      NameOf
      [
     )
     ?FAIL
     'Вложенные скобки пока не поддерживаются'
     if
      (
       l_Token
       =
       aBracketClose
      )
     then
      BEGIN
       aBracketOpen
       Ctx:Parser:PushSymbol
       l_A
       .slice>
       2
       IT
       BEGIN
        IN aSymbol
        IN aTokenType
        aSymbol
        Ctx:Parser:PushSymbol
       END
       l_Token
       Ctx:Parser:PushSymbol
       BREAK
      END
    END
   l_TokenType
   >>>[]
   l_A
   l_Token
   >>>[]
   l_A
   l_TokenType
   Tl3TokenType:ValueToName
   .
   l_Parser
   pop:Parser:NextToken
  END
 ; // VOID PROCEDURE DogAndBracket
 
 (
  '1'
  '2'
  '3'
  '4'
  '5'
  '6'
  '1'
  '2'
  +
  '123'
 )
 WHILE
 (
  StackLevel
  >
  0
 )
 .
 DogAndBracketTest
 DumpElement
; // VOID Test DogAndBracketTest

